<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
      <base target="_blank"/>
    
    <title>B'more on Rails Workshop for Women</title>
    <link href="/rails_tutorial/css/syntax.css" type="text/css" rel="stylesheet"/>
    <link href="/rails_tutorial/css/base.css" type="text/css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="/rails_tutorial/js/tutorial_nav.js"></script>
  </head>


<body>
  <div class="container">
    <nav>
      <p>
       
<div class="tutorial_nav">
  <ul id="menu-list">
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_01/" target="_self">
        1 Getting Started from Scratch
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_02/" target="_self">
        2 Creating the First Table in Your Database
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_03/" target="_self">
        3 Viewing Data in the Browser
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_04/" target="_self">
        4 Showing Detailed Information in the Browser
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_05/" target="_self">
        5 Creating Books Through the Browser
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_06/" target="_self">
        6 Updating Books
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_07/" target="_self">
        7 Styling Your Bookstore
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_08/" target="_self">
        8 Deleting a Book
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_09/" target="_self">
        9 Reviewing a Book
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_10/" target="_self">
        10 Showing a Book
       </a>
     </li>  
    
   </ul>

  <div class="menu" data-toggle="#menu-list">
    <a href="#menu" class="hamburger" target="_self">
      <div class="hamburger-icon"> &#9776</div>
      <div class="menu-title">Chapter 4 -- Showing Detailed Information in the Browser</div>
    </a>
  </div>
</div>

      </p>
    </nav>
    <div class="content">
      <div class="sectionheader">
<p>Showing Detailed Information in the Browser</p>
</div>

<div class="aside">
<p>You’re bookstore is starting to come along. You have an index that lists all the books in your database by title and author. This is great, but what about the other information you’ve stored about your books? It would be useful to see how much a book costs, or how many are available.</p>

<p>Let’s show this information.</p>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Let’s start by looking at your application’s routes again.</p>
  </li>
  <li>
    <p>Open Terminal and go to your <code class="highlighter-rouge">bookstore</code> directory.</p>
  </li>
  <li>
    <p>Run <code class="highlighter-rouge">rake routes</code>.</p>
  </li>
  <li>
    <p>So far we’ve worked with the first row in the routes table. We used the <code class="highlighter-rouge">/books</code> path with the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">index</code> action to list all your application’s books.</p>
  </li>
  <li>
    <p>Now that we want to show detailed book information we’ll need to use a different route.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">book</span> <span class="no">GET</span>    <span class="sr">/books/</span><span class="ss">:id</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span>      <span class="n">books</span><span class="c1">#show</span>
</code></pre>
    </div>

    <p>This time, we’ll use the <code class="highlighter-rouge">/books/:id</code> path with the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> action to show a book’s information.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span><span class="nb">pwd</span>
  /Users/awesomesauce/Projects/bookstore

  <span class="nv">$ </span>rake routes
     Prefix Verb   URI Pattern               Controller#Action
      books GET    /books<span class="o">(</span>.:format<span class="o">)</span>          books#index
            POST   /books<span class="o">(</span>.:format<span class="o">)</span>          books#create
   new_book GET    /books/new<span class="o">(</span>.:format<span class="o">)</span>      books#new
  edit_book GET    /books/:id/edit<span class="o">(</span>.:format<span class="o">)</span> books#edit
       book GET    /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#show
            PATCH  /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#update
            PUT    /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#update
            DELETE /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#destroy</code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>In the <code class="highlighter-rouge">/books/:id</code> path, we can take advantage of <code class="highlighter-rouge">:id</code> to get a book by it’s id.</p>

    <p>What’s that? You didn’t know a book could have an id? Let’s take a look.</p>
  </li>
  <li>
    <p>Go back to Terminal and start <code class="highlighter-rouge">rails console</code>.</p>
  </li>
  <li>
    <p>In the console, run <code class="highlighter-rouge">Book.first</code> to get the first book from your database.</p>
  </li>
  <li>
    <p>Take a look at the output. It might be see, but at the beginning there’s an id.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>#&lt;Book id: 1, title: "why's (poignant) Guide to Ruby", ... &gt;
</code></pre>
    </div>

    <p>The first book in your database has an id of 1.</p>
  </li>
  <li>
    <p>I wonder what id you second book will have…</p>

    <p>Run <code class="highlighter-rouge">Book.second</code> and look at the output.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>#&lt;Book id: 2, title: "Oh, the Places You'll Go!", ... &gt;
</code></pre>
    </div>

    <p>The second book in your database has an id of … 2!!!</p>
  </li>
  <li>
    <p>By default, every book you create will be given a unique id, and it will be given an id in sequential order.</p>
  </li>
  <li>
    <p>Exit the console.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="err">$</span> <span class="n">rails</span> <span class="n">c</span>
  <span class="no">Loading</span> <span class="n">development</span> <span class="n">environment</span> <span class="p">(</span><span class="no">Rails</span> <span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>
  <span class="o">&gt;&gt;</span> <span class="no">Book</span><span class="p">.</span><span class="nf">first</span>
    <span class="no">Book</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="s2">"books"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"books"</span> <span class="no">ORDER</span> <span class="no">BY</span> <span class="s2">"books"</span><span class="o">.</span><span class="s2">"id"</span> <span class="no">ASC</span> <span class="no">LIMIT</span> <span class="p">?</span>  <span class="p">[[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
  <span class="o">=&gt;</span> <span class="c1">#&lt;Book id: 1, title: "why's (poignant) Guide to Ruby", author: "why the lucky stiff", price_cents: 100, created_at: "2016-12-26 15:51:15", updated_at: "2016-12-26 15:51:15", quantity: 500&gt;</span>

  <span class="o">&gt;&gt;</span> <span class="no">Book</span><span class="p">.</span><span class="nf">second</span>
    <span class="no">Book</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="s2">"books"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"books"</span> <span class="no">ORDER</span> <span class="no">BY</span> <span class="s2">"books"</span><span class="o">.</span><span class="s2">"id"</span> <span class="no">ASC</span> <span class="no">LIMIT</span> <span class="p">?</span> <span class="no">OFFSET</span> <span class="p">?</span>  <span class="p">[[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">"OFFSET"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
  <span class="o">=&gt;</span> <span class="c1">#&lt;Book id: 2, title: "Oh, the Places You'll Go!", author: "Dr. Seuss", price_cents: 500, created_at: "2016-12-26 15:51:15", updated_at: "2016-12-26 15:51:15", quantity: 200&gt;</span>

  <span class="o">&gt;&gt;</span> <span class="nb">exit</span></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>How will the <code class="highlighter-rouge">/books/:id</code> path work in action?</p>
  </li>
  <li>
    <p>Go back to Terminal and start your application’s web server by running <code class="highlighter-rouge">rails server</code>.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">:id</code> can be replaced with specific ids. Since we know your first book’s id is 1, we can go to <code class="highlighter-rouge">/books/1</code>.</p>
  </li>
  <li>
    <p>Open your browser and go to <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>.</p>
  </li>
  <li>
    <p>An unknown action error?! Why does that look familiar… 😉</p>

    <p>You’re trying to access the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> action, but it doesn’t exist. Let’s make it.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="err">$</span> <span class="n">rails</span> <span class="n">server</span>
  <span class="o">=&gt;</span> <span class="no">Booting</span> <span class="no">Puma</span>
  <span class="o">=&gt;</span> <span class="no">Rails</span> <span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span> <span class="n">application</span> <span class="n">starting</span> <span class="k">in</span> <span class="n">development</span> <span class="n">on</span> <span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span>
  <span class="o">=&gt;</span> <span class="no">Run</span> <span class="sb">`rails server -h`</span> <span class="k">for</span> <span class="n">more</span> <span class="n">startup</span> <span class="n">options</span>
  <span class="no">Puma</span> <span class="n">starting</span> <span class="k">in</span> <span class="n">single</span> <span class="n">mode</span><span class="p">.</span><span class="nf">.</span><span class="p">.</span>
  <span class="nf">*</span> <span class="no">Version</span> <span class="mi">3</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="mi">0</span> <span class="p">(</span><span class="n">ruby</span> <span class="mi">2</span><span class="o">.</span><span class="mi">3</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="n">p112</span><span class="p">),</span> <span class="ss">codename: </span><span class="no">Sleepy</span> <span class="no">Sunday</span> <span class="no">Serenity</span>
  <span class="o">*</span> <span class="no">Min</span> <span class="ss">threads: </span><span class="mi">5</span><span class="p">,</span> <span class="n">max</span> <span class="ss">threads: </span><span class="mi">5</span>
  <span class="o">*</span> <span class="no">Environment</span><span class="p">:</span> <span class="n">development</span>
  <span class="o">*</span> <span class="no">Listening</span> <span class="n">on</span> <span class="n">tcp</span><span class="ss">:/</span><span class="o">/</span><span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span>
  <span class="no">Use</span> <span class="no">Ctrl</span><span class="o">-</span><span class="no">C</span> <span class="n">to</span> <span class="n">stop</span>
  <span class="no">Started</span> <span class="no">GET</span> <span class="s2">"/books/1"</span> <span class="k">for</span> <span class="o">::</span><span class="mi">1</span> <span class="n">at</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">26</span> <span class="mi">12</span><span class="p">:</span><span class="mo">07</span><span class="p">:</span><span class="mi">18</span> <span class="o">-</span><span class="mo">0500</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">SchemaMigration</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span> <span class="s2">"schema_migrations"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"schema_migrations"</span>

  <span class="no">AbstractController</span><span class="o">::</span><span class="no">ActionNotFound</span> <span class="p">(</span><span class="no">The</span> <span class="n">action</span> <span class="s1">'show'</span> <span class="n">could</span> <span class="n">not</span> <span class="n">be</span> <span class="n">found</span> <span class="k">for</span> <span class="no">BooksController</span><span class="p">):</span>

  <span class="p">.</span><span class="nf">.</span><span class="o">.</span></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing Unknown action error: &quot;The action 'show' could not be found for BooksController&quot;" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Open your text editor and go to <code class="highlighter-rouge">app/controllers/books_controller.rb</code>.</p>
  </li>
  <li>
    <p>After the index action, add the following:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">show</span>
<span class="k">end</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes, and go to <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a> again.</p>
  </li>
  <li>
    <p>Now you get a different error:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">ActionController</span><span class="o">::</span><span class="no">UnknownFormat</span> <span class="p">(</span><span class="no">BooksController</span><span class="c1">#show is missing a template for this request format and variant.</span>
</code></pre>
    </div>

    <p>We’ve seen this error too. You added the <code class="highlighter-rouge">show</code> action, but it doesn’t have a template to go with it.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre>  <span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">index</span>
      <span class="vi">@books</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">all</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">show</span>
    <span class="k">end</span>
  <span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing ActionController::UnknownFormat error: &quot;BooksController#show is missing a template for this request format and variant&quot;" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Let’s add the missing template.</p>
  </li>
  <li>
    <p>Go back to Terminal and stop your application’s web server by running <code class="highlighter-rouge">Ctrl-C</code>.</p>
  </li>
  <li>
    <p>Now, run <code class="highlighter-rouge">touch app/views/books/show.html.erb</code> to create the empty template.</p>
  </li>
  <li>
    <p>Restart your application’s web server by running <code class="highlighter-rouge">rails server</code> and revisit <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>.</p>
  </li>
  <li>
    <p>Yay! No errors!</p>

    <p>Now that we have the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> action rendering a template, we’re ready to show a book’s details.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span>rails s

  ...

  ^CExiting

  <span class="nv">$ </span>touch app/views/books/show.html.erb

  <span class="nv">$ </span>rails s

  ...</code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Before you can show a book’s details, you have to figure out <em>which</em> book’s details to show. How can we figure out which book to show?</p>
  </li>
  <li>
    <p>When you visit <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>, you send a request to your application’s web server. Thanks to Rails routing, the book id (1) is included in that request.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Started</span> <span class="no">GET</span> <span class="s2">"/books/1"</span> <span class="k">for</span> <span class="o">::</span><span class="mi">1</span> <span class="n">at</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">26</span> <span class="mi">16</span><span class="p">:</span><span class="mi">12</span><span class="p">:</span><span class="mo">07</span> <span class="o">-</span><span class="mo">0500</span>
<span class="no">Processing</span> <span class="n">by</span> <span class="no">BooksController</span><span class="c1">#show as HTML</span>
  <span class="no">Parameters</span><span class="p">:</span> <span class="p">{</span><span class="s2">"id"</span><span class="o">=&gt;</span><span class="s2">"1"</span><span class="p">}</span>
  <span class="no">Rendering</span> <span class="n">books</span><span class="o">/</span><span class="n">show</span><span class="p">.</span><span class="nf">html</span><span class="p">.</span><span class="nf">erb</span> <span class="n">within</span> <span class="n">layouts</span><span class="o">/</span><span class="n">application</span>
  <span class="no">Rendered</span> <span class="n">books</span><span class="o">/</span><span class="n">show</span><span class="p">.</span><span class="nf">html</span><span class="p">.</span><span class="nf">erb</span> <span class="n">within</span> <span class="n">layouts</span><span class="o">/</span><span class="n">application</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">3</span><span class="n">ms</span><span class="p">)</span>
<span class="no">Completed</span> <span class="mi">200</span> <span class="no">OK</span> <span class="k">in</span> <span class="mi">266</span><span class="n">ms</span> <span class="p">(</span><span class="no">Views</span><span class="p">:</span> <span class="mi">263</span><span class="o">.</span><span class="mi">1</span><span class="n">ms</span> <span class="o">|</span> <span class="no">ActiveRecord</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">ms</span><span class="p">)</span>
</code></pre>
    </div>

    <p>It’s tucked in there, but the id is inside the parameters hash.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Parameters</span><span class="p">:</span> <span class="p">{</span><span class="s2">"id"</span><span class="o">=&gt;</span><span class="s2">"1"</span><span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Let’s see how we can access the parameters hash in your <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> action.</p>
  </li>
</ol>
</div>
</div>
<div class="steps"><div class="list">
<ol>
  <li>
    <p>Open your text editor and go to <code class="highlighter-rouge">app/controllers/books_controller.rb</code>.</p>
  </li>
  <li>
    <p>In your controllers, request parameters are available as <code class="highlighter-rouge">params</code>.</p>
  </li>
  <li>
    <p>Inside the <code class="highlighter-rouge">show</code> method, add the following code:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="vi">@id</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span>
</code></pre>
    </div>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre>  <span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">index</span>
      <span class="vi">@books</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">all</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">show</span>
      <span class="vi">@id</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span>
    <span class="k">end</span>
  <span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>By defining <code class="highlighter-rouge">@id</code> in the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> method, it’s available in the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> template.</p>
  </li>
  <li>
    <p>Open <code class="highlighter-rouge">app/controllers/books/show.html.erb</code> in your text editor and add the following:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">This</span> <span class="n">book</span><span class="err">'</span><span class="n">s</span> <span class="nb">id</span> <span class="n">is</span> <span class="o">&lt;</span><span class="sx">%= @id %&gt;.
</span></code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>  <span class="no">This</span> <span class="n">book</span><span class="err">'</span><span class="n">s</span> <span class="nb">id</span> <span class="n">is</span> <span class="o">&lt;</span><span class="sx">%= @id %&gt;.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now that the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> template is wired to up the render something, what do you expect to see if you visit <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>?</p>

    <p>Do you have an idea? Let’s verify it!</p>
  </li>
  <li>
    <p>Go to <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>. What do you see??</p>
  </li>
</ol>
</div>
</div>

<p><img src="screenshot.jpg" alt="Browser showing &quot;/books/1&quot; with the request book's id" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Did reality meet your expecations?</p>

    <p>The page renders “This book’s id is 1.” becuase you made a request from your browser with book id 1 (<a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>).</p>

    <p>You’re able to render the id because you grabbed it from the request parameters and assigned it to <code class="highlighter-rouge">@id</code> inside the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> action.</p>
  </li>
  <li>
    <p>What happens if you go to <a href="http://localhost:3000/books/2">http://localhost:3000/books/2</a>?</p>

    <p>What about <a href="http://localhost:3000/books/3">http://localhost:3000/books/3</a>?</p>

    <p>The new book id is rendered on every request because you wired up the template to show the requested book’s id.</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now that we have the book id for the book we want to show, we can use it get that book from your application’s database.</p>
  </li>
  <li>
    <p>We’ve used a few methods to get books from the database. We’ve used <code class="highlighter-rouge">Book.all</code> to get all the books, and we’ve used <code class="highlighter-rouge">Book.first</code> to get the first book.</p>

    <p>But how do we get a book by it’s id?</p>
  </li>
  <li>
    <p>Let’s explore on the <code class="highlighter-rouge">rails console</code>.</p>
  </li>
  <li>
    <p>Go back to Terminal and quit your application’s web server by running <code class="highlighter-rouge">Ctrl-C</code>. Then, start the <code class="highlighter-rouge">rails console</code>.</p>
  </li>
  <li>
    <p>Now try running the following code:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Book</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>What did it return? It returned the book in your application’s database with id 3.</p>
  </li>
  <li>
    <p>What do you get with <code class="highlighter-rouge">Book.find(1)</code> and <code class="highlighter-rouge">Book.find(5)</code>? You get the book with that id.</p>
  </li>
  <li>
    <p>What happens if you do <code class="highlighter-rouge">Book.find(100)</code>?</p>

    <p>An error! <code class="highlighter-rouge">Book.find</code> returns an error when it doesn’t find a book with the given book id.</p>
  </li>
  <li>
    <p>So we can use <code class="highlighter-rouge">Book.find</code> to get books from your application’s database with a given id. If a book doesn’t exist with that id, we get an <code class="highlighter-rouge">ActiveRecord::RecordNotFound</code> error.</p>
  </li>
  <li>
    <p>Exit the console and restart your application’s web server.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="err">$</span> <span class="n">rails</span> <span class="n">server</span>

  <span class="p">.</span><span class="nf">.</span><span class="p">.</span>
  <span class="nf">^</span><span class="no">CExiting</span>

  <span class="err">$</span> <span class="n">rails</span> <span class="n">console</span>
  <span class="no">Loading</span> <span class="n">development</span> <span class="n">environment</span> <span class="p">(</span><span class="no">Rails</span> <span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>
  <span class="o">&gt;&gt;</span> <span class="no">Book</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="no">Book</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="s2">"books"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"books"</span> <span class="no">WHERE</span> <span class="s2">"books"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">=</span> <span class="p">?</span> <span class="no">LIMIT</span> <span class="p">?</span>  <span class="p">[[</span><span class="s2">"id"</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
  <span class="o">=&gt;</span> <span class="c1">#&lt;Book id: 3, title: "1984", author: "George Orwell", price_cents: 0, created_at: "2016-12-26 15:51:15", updated_at: "2016-12-26 15:51:15", quantity: 200&gt;</span>

  <span class="o">&gt;&gt;</span> <span class="no">Book</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="no">Book</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="s2">"books"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"books"</span> <span class="no">WHERE</span> <span class="s2">"books"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">=</span> <span class="p">?</span> <span class="no">LIMIT</span> <span class="p">?</span>  <span class="p">[[</span><span class="s2">"id"</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
  <span class="o">=&gt;</span> <span class="c1">#&lt;Book id: 1, title: "why's (poignant) Guide to Ruby", author: "why the lucky stiff", price_cents: 100, created_at: "2016-12-26 15:51:15", updated_at: "2016-12-26 15:51:15", quantity: 500&gt;</span>

  <span class="o">&gt;&gt;</span> <span class="no">Book</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="no">Book</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="s2">"books"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"books"</span> <span class="no">WHERE</span> <span class="s2">"books"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">=</span> <span class="p">?</span> <span class="no">LIMIT</span> <span class="p">?</span>  <span class="p">[[</span><span class="s2">"id"</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
  <span class="o">=&gt;</span> <span class="c1">#&lt;Book id: 5, title: "Life of Pi", author: "Yann Martel", price_cents: 750, created_at: "2016-12-26 15:51:15", updated_at: "2016-12-26 15:51:15", quantity: 50&gt;</span>

  <span class="o">&gt;&gt;</span> <span class="no">Book</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="no">Book</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="s2">"books"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"books"</span> <span class="no">WHERE</span> <span class="s2">"books"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">=</span> <span class="p">?</span> <span class="no">LIMIT</span> <span class="p">?</span>  <span class="p">[[</span><span class="s2">"id"</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
  <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">RecordNotFound</span><span class="p">:</span> <span class="no">Couldn</span><span class="s1">'t find Book with '</span><span class="nb">id</span><span class="s1">'=100
	from /Users/alimi/.rvm/gems/ruby-2.3.1/gems/activerecord-5.0.0.1/lib/active_record/core.rb:173:in `find'</span>
	<span class="n">from</span> <span class="p">(</span><span class="n">irb</span><span class="p">):</span><span class="mi">5</span>
	<span class="n">from</span> <span class="sr">/Users/</span><span class="n">alimi</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mi">2</span><span class="o">.</span><span class="mi">3</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">railties</span><span class="o">-</span><span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">rails</span><span class="o">/</span><span class="n">commands</span><span class="o">/</span><span class="n">console</span><span class="p">.</span><span class="nf">rb</span><span class="p">:</span><span class="mi">65</span><span class="ss">:in</span> <span class="sb">`start'
	from /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/console_helper.rb:9:in `</span><span class="n">start</span><span class="s1">'
	from /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:78:in `console'</span>
	<span class="n">from</span> <span class="sr">/Users/</span><span class="n">alimi</span><span class="o">/</span><span class="p">.</span><span class="nf">rvm</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">ruby</span><span class="o">-</span><span class="mi">2</span><span class="o">.</span><span class="mi">3</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">gems</span><span class="o">/</span><span class="n">railties</span><span class="o">-</span><span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">rails</span><span class="o">/</span><span class="n">commands</span><span class="o">/</span><span class="n">commands_tasks</span><span class="p">.</span><span class="nf">rb</span><span class="p">:</span><span class="mi">49</span><span class="ss">:in</span> <span class="sb">`run_command!'
	from /Users/alimi/.rvm/gems/ruby-2.3.1/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `</span><span class="o">&lt;</span><span class="n">top</span> <span class="p">(</span><span class="n">required</span><span class="p">)</span><span class="o">&gt;</span><span class="s1">'
	from bin/rails:4:in `require'</span>
	<span class="n">from</span> <span class="n">bin</span><span class="o">/</span><span class="n">rails</span><span class="p">:</span><span class="mi">4</span><span class="ss">:in</span> <span class="sb">`&lt;main&gt;'

  &gt;&gt; exit

  $ rails server
  =&gt; Booting Puma
  ...</span></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Let’s use our new knowledge of <code class="highlighter-rouge">Book.find</code> to get and show the requested book in the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> action.</p>
  </li>
  <li>
    <p>In your text editor, open the <code class="highlighter-rouge">BooksController</code>.</p>
  </li>
  <li>
    <p>We’ve already grabbed the requested book id and set it to <code class="highlighter-rouge">@id</code>. Let’s use that to find the requested book.</p>
  </li>
  <li>
    <p>Inside the <code class="highlighter-rouge">show</code> method, add the following line:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="vi">@book</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="vi">@id</span><span class="p">)</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes and go to <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>.</p>

    <p>Did you notice anything different? I hope not, because we didn’t update the template 😝</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre>  <span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">index</span>
      <span class="vi">@books</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">all</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">show</span>
      <span class="vi">@id</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span>
      <span class="vi">@book</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="vi">@id</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now, open the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">show</code> template (<code class="highlighter-rouge">app/views/books/show.html.erb</code>).</p>
  </li>
  <li>
    <p>Add the following line to the end of the file</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">This</span> <span class="n">book</span> <span class="n">is</span> <span class="n">called</span> <span class="o">&lt;</span><span class="sx">%= @book.title %&gt;
</span></code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes and go back to <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>  <span class="no">This</span> <span class="n">book</span><span class="err">'</span><span class="n">s</span> <span class="nb">id</span> <span class="n">is</span> <span class="o">&lt;</span><span class="sx">%= @id %&gt;.
  This book is called &lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">title</span> <span class="sx">%&gt;.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Yay! You got the request book and showed <em>some</em> of its information.</p>

    <p>Unfortunately, it’s kinda smashed together on the page.</p>

    <p>Let’s use a definition list to clean it up.</p>
  </li>
  <li>
    <p>Open <code class="highlighter-rouge">app/views/books/show.html.erb</code> in your text editor and delete everything in the file.</p>

    <p>Yes, EVERYTHING.</p>

    <p>There’s nothing wrong with what we’ve done so far, but adding the definition list is easier from scratch.</p>
  </li>
  <li>
    <p>Now, add the following code to the file:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">dl</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Id</span><span class="o">&lt;</span><span class="sr">/dt&gt;
  &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

  <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Title</span><span class="o">&lt;</span><span class="sr">/dt&gt;
  &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/dl&gt;
</span></code></pre>
    </div>

    <p>This is a definition list with a couple of terms: id and title. The terms are defined with values for the given book.</p>

    <p>Save your changes and go to <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a> to see the results.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">dl</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Id</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Title</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/dl&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser show &quot;/books/1&quot; as a definition list" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>Now that we have a definition list with the book’s id and title, update it to include the rest of the book’s information (author, price_cents, and quantity).</li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>What did you come up with? Your solution should look something like this:</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Id<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">id</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Title<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Author<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">author</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Price Cents<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">price_cents</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Quantity<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">quantity</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Update your solution to match this solution.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">dl</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Id</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Title</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Author</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Price</span> <span class="no">Cents</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.price_cents %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Quantity</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/dl&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>The books details look great, but doesn’t “Price Cents” look kinda weird?</p>

    <p>Do you ever wonder how much something would cost in pennies? Really?! I thought I was the only one!</p>

    <p>For most people, it would be easier to see the book’s price in dollars. Fortunately, Rails has our back.</p>
  </li>
  <li>
    <p>Rails provides a <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency"><code class="highlighter-rouge">number_to_currency</code> method</a> that prints a number as currency.</p>

    <p>Let’s see what happens when you use it.</p>
  </li>
  <li>
    <p>Reopen <code class="highlighter-rouge">app/views/books/show.html.erb</code> and change the “Price Cents” definition from</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">price_cents</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>
</code></pre>
    </div>

    <p>to</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="n">number_to_currency</span><span class="p">(</span><span class="vi">@book</span><span class="p">.</span><span class="nf">price_cents</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes and revist <a href="http://localhost:3000/books/1">http://localhost:3000/books/1</a>.</p>
  </li>
</ol>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">dl</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Id</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Title</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Author</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Price</span> <span class="no">Cents</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents) %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Quantity</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.quantity %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/dl&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>
</div>

<p><img src="screenshot.jpg" alt="Browser showing &quot;/books/1&quot; with `number_to_currency(price_cents)`" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Looks great, right!</p>

    <p>Except <em>why’s (poignant) Guide to Ruby</em> doesn’t cost $100.00. We set the books price_cents to 100, and 100 cents is $1.00.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">number_to_currency</code> formats a number as a dollar amount, but the number has to be in dollars.</p>

    <p>We need to first convert <code class="highlighter-rouge">price_cents</code> to dollars before we can really use <code class="highlighter-rouge">number_to_currency</code>.</p>
  </li>
  <li>
    <p>Reopen <code class="highlighter-rouge">app/views/books/show.html.erb</code> and change the “Price Cents” definition from</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="n">number_to_currency</span><span class="p">(</span><span class="vi">@book</span><span class="p">.</span><span class="nf">price_cents</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>
</code></pre>
    </div>

    <p>to</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dd&gt;</span><span class="cp">&lt;%=</span> <span class="n">number_to_currency</span><span class="p">(</span><span class="vi">@book</span><span class="p">.</span><span class="nf">price_cents</span> <span class="o">/</span> <span class="mi">100</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/dd&gt;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>To convert from cents to dollars, we can simply divide by 100.</p>

    <p>(Actually we have to divide by 100.0 because <a href="http://memecrunch.com/meme/ALWHK/if-you-use-floating-point-math/image.jpg">floating point math is fun</a>)</p>

    <p>Then, the converted value is used by <code class="highlighter-rouge">number_to_currency</code>.</p>
  </li>
  <li>
    <p>You can also go ahead and change the definition term from “Price Cents” to “Price”.</p>
  </li>
  <li>
    <p>Save your changes and try looking up a few of your books in your browser.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">dl</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Id</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Title</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Author</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Price</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents /</span> <span class="mi">100</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">%&gt;&lt;</span><span class="sr">/dd&gt;

    &lt;dt&gt;Quantity&lt;/</span><span class="n">dt</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dd</span><span class="o">&gt;&lt;</span><span class="sx">%= @book.quantity %&gt;&lt;/dd&gt;
  &lt;/dl&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing &quot;/books/1&quot; with a nicely formated price" /></p>

<div class="aside">
<p>We’re making really good progress! Anyone can visit your bookstore to see what books you have, and they can learn a little about those books.</p>

<p>I love that I can see what books you have and how much they cost, but what if I’ve never heard of one of your books before??</p>

<p>Let’s add book descriptions to help give just a little more info about your books.</p>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>We can add descriptions to books by adding a <code class="highlighter-rouge">description</code> column to the <code class="highlighter-rouge">books</code> table.</p>
  </li>
  <li>
    <p>Do you remember how we added columns to your application’s database tables?</p>

    <p>We’ve done that through migrations. We created a migration to add the <code class="highlighter-rouge">books</code> table, and we changed that migration to add new columns.</p>

    <p>Now that you’re bookstore application is coming along, we don’t want to go back and edit past migrations. This is another one of those things you’ll just have to trust me on.</p>

    <p>But how will we add the <code class="highlighter-rouge">description</code> column to the <code class="highlighter-rouge">books</code> table??</p>

    <p>A new migration!</p>
  </li>
  <li>
    <p>Go back to Terminal and stop your application’s web server by running <code class="highlighter-rouge">Ctrl-C</code>.</p>
  </li>
  <li>
    <p>Now, run <code class="highlighter-rouge">rails generate migration add_description_to_books</code>.</p>

    <p>This creates a new timestamped migration file <code class="highlighter-rouge">db/migrate/CURRENT_TIMESTAMP_add_description_to_books.rb</code>.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span>rails generate migration add_description_to_books
        invoke  active_record
        create    db/migrate/20161227020938_add_description_to_books.rb</code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Open your new migration in your text editor.</p>
  </li>
  <li>
    <p>Inside the change method, add the following line:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">add_column</span> <span class="ss">:books</span><span class="p">,</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">:text</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>With this change, we’re setting up the migration to add a column to the <code class="highlighter-rouge">books</code> table. The new column will be named <code class="highlighter-rouge">description</code> and it will store any amount of <code class="highlighter-rouge">text</code>.</p>
  </li>
  <li>
    <p>Save your changes.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre>  <span class="k">class</span> <span class="nc">AddDescriptionToBooks</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">change</span>
      <span class="n">add_column</span> <span class="ss">:books</span><span class="p">,</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">:text</span>
    <span class="k">end</span>
  <span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>Now, go back to Terminal and run <code class="highlighter-rouge">rake db:migrate</code> to run your new migration against your application’s database.</li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span>rake db:migrate
  <span class="o">==</span> 20161227020938 AddDescriptionToBooks: migrating <span class="o">============================</span>
  -- add_column<span class="o">(</span>:books, :description, :text<span class="o">)</span>
     -&gt; 0.0049s
  <span class="o">==</span> 20161227020938 AddDescriptionToBooks: migrated <span class="o">(</span>0.0050s<span class="o">)</span> <span class="o">===================</span></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Let’s take a look how this changes your application.</p>
  </li>
  <li>
    <p>In Terminal, start <code class="highlighter-rouge">rails console</code>, get your first book and assign it to a variable called <code class="highlighter-rouge">my_first_book</code>.</p>
  </li>
  <li>
    <p>Does the book look different?</p>

    <p>At the end, you should see a nil description.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>=&gt; #&lt;Book id: 1, title: "why's (poignant) Guide to Ruby", ..., description: nil&gt;
</code></pre>
    </div>

    <p><code class="highlighter-rouge">description</code> is nil because you just added it.</p>
  </li>
  <li>
    <p>You can give <code class="highlighter-rouge">my_first_book</code> a description by running</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">my_first_book</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">description: </span><span class="s2">"YOUR INSPIRING DESCRIPTION"</span><span class="p">)</span>
</code></pre>
    </div>

    <p>Where YOUR INSPIRING DESCRIPTION is…YOUR INSPIRING DESCRIPTION.</p>

    <p>(Don’t worry about your description being inspiring 😉)</p>
  </li>
  <li>
    <p>After you’ve added YOUR INSPIRING DESCRIPTION to <code class="highlighter-rouge">my_first_book</code>, you can run <code class="highlighter-rouge">my_first_book.description</code> to see the new description.</p>
  </li>
  <li>
    <p>Go ahead and add descriptions for the of rest your books. Your application’s database should have seven books, which means you have six descriptions to write.</p>
  </li>
  <li>
    <p>When you’re done, exit the <code class="highlighter-rouge">rails console</code> and restart your application’s web server by running <code class="highlighter-rouge">rails server</code>.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="err">$</span> <span class="n">rails</span> <span class="n">console</span>
  <span class="no">Loading</span> <span class="n">development</span> <span class="n">environment</span> <span class="p">(</span><span class="no">Rails</span> <span class="mi">5</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>

  <span class="o">&gt;&gt;</span> <span class="n">my_first_book</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">first</span>

  <span class="o">&gt;&gt;</span> <span class="n">my_first_book</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">description: </span><span class="s2">"Chunky Bacon"</span><span class="p">)</span>
     <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="n">ms</span><span class="p">)</span>  <span class="k">begin</span> <span class="n">transaction</span>
    <span class="no">SQL</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">6</span><span class="n">ms</span><span class="p">)</span>  <span class="no">UPDATE</span> <span class="s2">"books"</span> <span class="no">SET</span> <span class="s2">"updated_at"</span> <span class="o">=</span> <span class="sc">?,</span> <span class="s2">"description"</span> <span class="o">=</span> <span class="p">?</span> <span class="no">WHERE</span> <span class="s2">"books"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">=</span> <span class="p">?</span>  <span class="p">[[</span><span class="s2">"updated_at"</span><span class="p">,</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">27</span> <span class="mo">02</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">28</span> <span class="no">UTC</span><span class="p">],</span> <span class="p">[</span><span class="s2">"description"</span><span class="p">,</span> <span class="s2">"Chunky Bacon"</span><span class="p">],</span> <span class="p">[</span><span class="s2">"id"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
     <span class="p">(</span><span class="mi">2</span><span class="o">.</span><span class="mi">3</span><span class="n">ms</span><span class="p">)</span>  <span class="n">commit</span> <span class="n">transaction</span>
  <span class="o">=&gt;</span> <span class="kp">true</span>

  <span class="o">&gt;&gt;</span> <span class="n">my_first_book</span><span class="p">.</span><span class="nf">description</span>
  <span class="o">=&gt;</span> <span class="s2">"Chunky Bacon"</span>

  <span class="p">.</span><span class="nf">.</span><span class="p">.</span>

  <span class="nf">&gt;</span><span class="o">&gt;</span> <span class="nb">exit</span></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now that your books have descriptions, you can share them with the WORLD!</p>
  </li>
  <li>
    <p>Reopen <code class="highlighter-rouge">app/views/books/show.html.erb</code> and add the book’s description to the end of the definition list.</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>What did you come up with? Here’s the complete template.</p>
  </li>
  <li>
    <p>Save your changes and view your beautiful descriptions in your browser.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">dl</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Id</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.id %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Title</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.title %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Author</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= @book.author %&gt;&lt;/</span><span class="n">dd</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">dt</span><span class="o">&gt;</span><span class="no">Price</span><span class="o">&lt;</span><span class="sr">/dt&gt;
    &lt;dd&gt;&lt;%= number_to_currency(@book.price_cents /</span> <span class="mi">100</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">%&gt;&lt;</span><span class="sr">/dd&gt;

    &lt;dt&gt;Quantity&lt;/</span><span class="n">dt</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">dd</span><span class="o">&gt;&lt;</span><span class="sx">%= @book.quantity %&gt;&lt;/dd&gt;

    &lt;dt&gt;Description&lt;/dt&gt;
    &lt;dd&gt;&lt;%=</span> <span class="vi">@book</span><span class="p">.</span><span class="nf">description</span> <span class="sx">%&gt;&lt;/dd&gt;</span>
  <span class="o">&lt;</span><span class="sr">/dl&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing &quot;/books/1&quot; with a lovely description of &quot;why's (poignant) Guide to Ruby&quot;" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now you have a lovely books index and lots of individual book views, but there is no relationship between the two. Let’s link them!</p>
  </li>
  <li>
    <p>Since you have a books index with a little bit of book information and book views lots of specific information, it makes sense to link from the books index to specific book pages.</p>

    <p>A visitor to your bookstore viewing a book could click on it to get more detailed information.</p>

    <p>We’ll update the index so book titles link to their book’s page.</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>In HTML, you add links using anchor elements (<code class="highlighter-rouge">&lt;a&gt;</code> tags). Anchor elements link to other pages by their <code class="highlighter-rouge">href</code> attribute.</p>

    <p>Fortunately, Rails gives us a convience method to abstract away some of that work.</p>
  </li>
  <li>
    <p>In your text editor, open <code class="highlighter-rouge">app/views/books/index.html.erb</code>.</p>
  </li>
  <li>
    <p>Change the list item that renders book titles and authors to this:</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;li&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span><span class="p">(</span><span class="n">book</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">book_path</span><span class="p">(</span><span class="n">book</span><span class="p">))</span> <span class="cp">%&gt;</span> by <span class="cp">&lt;%=</span> <span class="n">book</span><span class="p">.</span><span class="nf">author</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/li&gt;</span>
</code></pre>
    </div>

    <p>Rails gives us a <code class="highlighter-rouge">link_to</code> method we can use to create anchor elements.</p>

    <p>First, you give it the text for the link. In this case, we want to use the book’s title as the link text.</p>

    <p>Then, you give it the path for the link. We want the link to go to <code class="highlighter-rouge">/books/:id</code>, but we passed it <code class="highlighter-rouge">book_path(book)</code>. <code class="highlighter-rouge">book_path(book)</code> is another Rails method. Long story short, it generates <code class="highlighter-rouge">/books/:id</code> for the given book.</p>
  </li>
  <li>
    <p>Save your changes and go to <a href="http://localhost:3000/books">http://localhost:3000/books</a>. Try clicking all the links!</p>

    <p>When you’re done, stop your application’s web server.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;

  &lt;ul&gt;
    &lt;% @books.each do |book| %&gt;
      &lt;li&gt;
        &lt;%= link_to(book.title, book_path(book)) %&gt; by &lt;%= book.author %&gt;
      &lt;/</span><span class="n">li</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
  <span class="o">&lt;</span><span class="sr">/ul&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing books index with all the links!" /></p>

      <div class="tutorial-button-group">
  
    
      <a href="/rails_tutorial/tutorial/chapter_03/" target="_self">
        <div class="back-button">
          Chapter 3
        </div>
      </a>
    
    
      <a href="/rails_tutorial/tutorial/chapter_05/" target="_self">
        <div class="next-button">
          Chapter 5
        </div>
      </a>
    
  
</div>

    </div>
  </div>
<footer>
  <div class="container">
    <p class="center-text">Here's the footer!!</a></p>
  </div>
</footer>
</body>
</html>

