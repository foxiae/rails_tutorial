<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
      <base target="_blank"/>
    
    <title>B'more on Rails Workshop for Women</title>
    <link href="/rails_tutorial/css/syntax.css" type="text/css" rel="stylesheet"/>
    <link href="/rails_tutorial/css/base.css" type="text/css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="/rails_tutorial/js/tutorial_nav.js"></script>
  </head>


<body>
  <div class="container">
    <nav>
      <p>
       
<div class="tutorial_nav">
  <ul id="menu-list">
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_01/" target="_self">
        1 Getting Started from Scratch
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_02/" target="_self">
        2 Creating the First Table in Your Database
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_03/" target="_self">
        3 Viewing Data in the Browser
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_04/" target="_self">
        4 Showing Detailed Information in the Browser
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_05/" target="_self">
        5 Creating Books Through the Browser
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_06/" target="_self">
        6 Updating Books
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_07/" target="_self">
        7 Styling Your Bookstore
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_08/" target="_self">
        8 Deleting a Book
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_09/" target="_self">
        9 Reviewing a Book
       </a>
     </li>  
    
     <li>
      <a href="/rails_tutorial/tutorial/chapter_10/" target="_self">
        10 Showing a Book
       </a>
     </li>  
    
   </ul>

  <div class="menu" data-toggle="#menu-list">
    <a href="#menu" class="hamburger" target="_self">
      <div class="hamburger-icon"> &#9776</div>
      <div class="menu-title">Chapter 3 -- Viewing Data in the Browser</div>
    </a>
  </div>
</div>

      </p>
    </nav>
    <div class="content">
      <div class="sectionheader">
<p>Viewing Data in the Browser</p>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>You’ve added a lot of books to your bookstore, but wouldn’t it be nice to actually see them in the browser? You are building a web application after all.</p>
  </li>
  <li>
    <p>Before you can see your books, you’ll need make some changes. Open the <code class="highlighter-rouge">bookstore</code> directory in your text editor.</p>
  </li>
  <li>
    <p>Now open <code class="highlighter-rouge">config/routes.rb</code> and add the following line inside the only block in the file:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">resources</span> <span class="ss">:books</span>  
</code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>    <span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
      <span class="c1"># For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html</span>
      <span class="n">resources</span> <span class="ss">:books</span>
    <span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Go back to Terminal and make sure you’re in the <code class="highlighter-rouge">bookstore</code> directory.</p>
  </li>
  <li>
    <p>Run <code class="highlighter-rouge">rake routes</code>. You should see a bunch of stuff about books along the lines of…</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code>   <span class="no">Prefix</span> <span class="no">Verb</span>   <span class="no">URI</span> <span class="no">Pattern</span>               <span class="no">Controller</span><span class="c1">#Action</span>
    <span class="n">books</span> <span class="no">GET</span>    <span class="sr">/books(.:format)          books#index
          POST   /</span><span class="n">books</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span>          <span class="n">books</span><span class="c1">#create</span>
 <span class="n">new_book</span> <span class="no">GET</span>    <span class="sr">/books/ne</span><span class="n">w</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span>      <span class="n">books</span><span class="c1">#new</span>
<span class="n">edit_book</span> <span class="no">GET</span>    <span class="sr">/books/</span><span class="ss">:id</span><span class="o">/</span><span class="n">edit</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span> <span class="n">books</span><span class="c1">#edit</span>
     <span class="n">book</span> <span class="no">GET</span>    <span class="sr">/books/</span><span class="ss">:id</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span>      <span class="n">books</span><span class="c1">#show</span>
          <span class="no">PATCH</span>  <span class="sr">/books/</span><span class="ss">:id</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span>      <span class="n">books</span><span class="c1">#update</span>
          <span class="no">PUT</span>    <span class="sr">/books/</span><span class="ss">:id</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span>      <span class="n">books</span><span class="c1">#update</span>
          <span class="no">DELETE</span> <span class="sr">/books/</span><span class="ss">:id</span><span class="p">(</span><span class="o">.</span><span class="ss">:format</span><span class="p">)</span>      <span class="n">books</span><span class="c1">#destroy</span>
</code></pre>
    </div>

    <p><code class="highlighter-rouge">rake routes</code> prints a table of the available routes in your application. Since you added <code class="highlighter-rouge">books</code> as a resource in <code class="highlighter-rouge">config/routes.rb</code>, your application has a bunch of book routes.</p>

    <p>The <code class="highlighter-rouge">URI Pattern</code> column tells you how to reach the routes from a browser.</p>

    <p>For example, when your application is running locally you can reach <code class="highlighter-rouge">/books</code> by going to <code class="highlighter-rouge">http://localhost:3000/books</code>.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span><span class="nb">pwd</span>
  /Users/awesomesauce/Projects/bookstore

  <span class="nv">$ </span>rake routes
     Prefix Verb   URI Pattern               Controller#Action
      books GET    /books<span class="o">(</span>.:format<span class="o">)</span>          books#index
            POST   /books<span class="o">(</span>.:format<span class="o">)</span>          books#create
   new_book GET    /books/new<span class="o">(</span>.:format<span class="o">)</span>      books#new
  edit_book GET    /books/:id/edit<span class="o">(</span>.:format<span class="o">)</span> books#edit
       book GET    /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#show
            PATCH  /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#update
            PUT    /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#update
            DELETE /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#destroy</code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Let’s trying going to the <code class="highlighter-rouge">/books</code> route.</p>
  </li>
  <li>
    <p>In Terminal, run <code class="highlighter-rouge">rails server</code> to start your application’s web server.</p>
  </li>
  <li>
    <p>Now, open your favorite web browser and go to <a href="http://localhost:3000/books">http://localhost:3000/books</a>.</p>
  </li>
  <li>
    <p>If I had to guess, you probably got an error :)</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span>rails server
  <span class="o">=</span>&gt; Booting Puma
  <span class="o">=</span>&gt; Rails 5.0.0.1 application starting <span class="k">in </span>development on http://localhost:3000
  <span class="o">=</span>&gt; Run <span class="sb">`</span>rails server -h<span class="sb">`</span> <span class="k">for </span>more startup options
  Puma starting <span class="k">in </span>single mode...
  <span class="k">*</span> Version 3.6.0 <span class="o">(</span>ruby 2.3.1-p112<span class="o">)</span>, codename: Sleepy Sunday Serenity
  <span class="k">*</span> Min threads: 5, max threads: 5
  <span class="k">*</span> Environment: development
  <span class="k">*</span> Listening on tcp://localhost:3000
  Use Ctrl-C to stop
  Started GET <span class="s2">"/books"</span> <span class="k">for</span> ::1 at 2016-11-28 22:24:04 -0500
    ActiveRecord::SchemaMigration Load <span class="o">(</span>0.4ms<span class="o">)</span>  SELECT <span class="s2">"schema_migrations"</span>.<span class="k">*</span> FROM <span class="s2">"schema_migrations"</span>

  ActionController::RoutingError <span class="o">(</span>uninitialized constant BooksController<span class="o">)</span>:
  ...</code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing Routing Error: &quot;uninitialized constant BooksController&quot;" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>We’ve run into a problem, but Rails is giving us some info to help us understand what’s going on.</p>

    <p>You’re getting a <code class="highlighter-rouge">Routing Error</code> because there’s an <code class="highlighter-rouge">uninitialized constant BooksController</code>. Rails is expecting your application will have a <code class="highlighter-rouge">BooksController</code>, so let’s create it!</p>
  </li>
  <li>
    <p>Stop your rails server by running <code class="highlighter-rouge">Ctrl-c</code>.</p>
  </li>
  <li>
    <p>Create the <code class="highlighter-rouge">BooksController</code> by running <code class="highlighter-rouge">touch app/controllers/books_controller.rb</code>.</p>
  </li>
  <li>
    <p>Restart your web server by running <code class="highlighter-rouge">rails server</code>, and try going to <a href="http:://localhost:3000/books">http:://localhost:3000/books</a> again.</p>

    <p>That still errored, didn’t it? But hey, at least you got a new error!</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span>rails server
  <span class="o">=</span>&gt; Booting Puma
  <span class="o">=</span>&gt; Rails 5.0.0.1 application starting <span class="k">in </span>development on http://localhost:3000
  <span class="o">=</span>&gt; Run <span class="sb">`</span>rails server -h<span class="sb">`</span> <span class="k">for </span>more startup options
  Puma starting <span class="k">in </span>single mode...
  <span class="k">*</span> Version 3.6.0 <span class="o">(</span>ruby 2.3.1-p112<span class="o">)</span>, codename: Sleepy Sunday Serenity
  <span class="k">*</span> Min threads: 5, max threads: 5
  <span class="k">*</span> Environment: development
  <span class="k">*</span> Listening on tcp://localhost:3000
  Use Ctrl-C to stop
  ...
  ^CExiting

  <span class="nv">$ </span>touch app/controllers/books_controller.rb

  <span class="nv">$ </span>rails server
  <span class="o">=</span>&gt; Booting Puma
  <span class="o">=</span>&gt; Rails 5.0.0.1 application starting <span class="k">in </span>development on http://localhost:3000
  ...
  Use Ctrl-C to stop
  Started GET <span class="s2">"/books"</span> <span class="k">for</span> ::1 at 2016-11-29 20:55:26 -0500
    ActiveRecord::SchemaMigration Load <span class="o">(</span>0.2ms<span class="o">)</span>  SELECT <span class="s2">"schema_migrations"</span>.<span class="k">*</span> FROM <span class="s2">"schema_migrations"</span>

  LoadError <span class="o">(</span>Unable to autoload constant BooksController, expected /Users/awesomesauce/Projects/bookstore/app/controllers/books_controller.rb to define it<span class="o">)</span>:</code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing LoadError: &quot;LoadError in BooksController#index
  Unable to autoload constant BooksController, expected /Users/awesomesauce/Projects/bookstore/app/controllers/books_controller.rb to define it&quot;" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now you got a <code class="highlighter-rouge">LoadError</code> because <code class="highlighter-rouge">BooksController</code> isn’t defined.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Unable</span> <span class="n">to</span> <span class="nb">autoload</span> <span class="n">constant</span> <span class="no">BooksController</span><span class="p">,</span> 
<span class="n">expected</span> <span class="sr">/Users/</span><span class="n">awesomesauce</span><span class="o">/</span><span class="no">Projects</span><span class="o">/</span><span class="n">bookstore</span><span class="o">/</span><span class="n">app</span><span class="o">/</span><span class="n">controllers</span><span class="o">/</span><span class="n">books_controller</span><span class="p">.</span><span class="nf">rb</span> 
<span class="n">to</span> <span class="n">define</span> <span class="n">it</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Remember the <code class="highlighter-rouge">touch</code> command we used to create the <code class="highlighter-rouge">BooksController</code>?</p>

    <p><code class="highlighter-rouge">touch app/controllers/books_controller.rb</code></p>

    <p>It created the <code class="highlighter-rouge">BooksController</code> file, but the file is empty. Don’t belive me? Let’s take a look.</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>If you’re text editor isn’t already open, open it and go to the <code class="highlighter-rouge">bookstore</code> directory.</p>
  </li>
  <li>
    <p>Now, open <code class="highlighter-rouge">app/controllers/books_controller.rb</code>.</p>
  </li>
  <li>
    <p>See, it’s empty :)</p>

    <p><code class="highlighter-rouge">touch</code> creates empty files. We used it to create an empty file called <code class="highlighter-rouge">app/controllers/books_controller.rb</code>.</p>
  </li>
  <li>
    <p>The error you got said something about there being a missing constant <code class="highlighter-rouge">BooksController</code>. Let’s add it.</p>
  </li>
  <li>
    <p>Add the following code to <code class="highlighter-rouge">app/controllers/books_controller.rb</code>:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
<span class="k">end</span>
</code></pre>
    </div>

    <p>That should define the constant Rails was looking for.</p>
  </li>
  <li>
    <p>Save the file and try going to <a href="http://localhost:3000/books">http://localhost:3000/books</a> again.</p>

    <p>New error!</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>  <span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
<span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing Unknown action error: &quot;The action 'index' could not be found for BooksController&quot;" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>This new error is telling us that you’re <code class="highlighter-rouge">BooksController</code> doesn’t have an <code class="highlighter-rouge">index</code> action. That kinda makes sense - we didn’t add very much code to the <code class="highlighter-rouge">BooksController</code>. But why does it care that the <code class="highlighter-rouge">index</code> action is missing?</p>
  </li>
  <li>
    <p>Remember the routing table? Kinda? Don’t worry, it’s fuzzy for me too. Let’s pull it up again.</p>
  </li>
  <li>
    <p>Go back to Terminal and stop the <code class="highlighter-rouge">rails server</code> by running <code class="highlighter-rouge">Ctrl-c</code>.</p>
  </li>
  <li>
    <p>Now, run <code class="highlighter-rouge">rake routes</code>. Voila - the routing table.</p>
  </li>
  <li>
    <p>The first entry in the routing table is for the <code class="highlighter-rouge">/books</code> path.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Prefix</span> <span class="no">Verb</span>   <span class="no">URI</span> <span class="no">Pattern</span>       <span class="no">Controller</span><span class="c1">#Action</span>
 <span class="n">books</span> <span class="no">GET</span>    <span class="sr">/books(.:format)  books#index
</span></code></pre>
    </div>

    <p>The last column tells us which controller and action get run when we go to the <code class="highlighter-rouge">/books</code> path.</p>

    <p>The URI Pattern <code class="highlighter-rouge">/books(.:format)</code> maps to the Controller#Action pair of <code class="highlighter-rouge">books#index</code>. This tells us requests to the <code class="highlighter-rouge">/books</code> path will be routed to the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">index</code> action.</p>

    <p>Clear as mud, right? Don’t worry, it’ll make more sense later.</p>
  </li>
  <li>
    <p>Now that we (kinda) know why we’re trying to run the <code class="highlighter-rouge">index</code> action`, let’s add it.</p>
  </li>
  <li>
    <p>Before we go on, restart your web server by running <code class="highlighter-rouge">rails server</code>.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">  <span class="nv">$ </span>rails server
  <span class="o">=</span>&gt; Booting Puma
  ...
  ^CExiting

  <span class="nv">$ </span>rake routes
     Prefix Verb   URI Pattern               Controller#Action
      books GET    /books<span class="o">(</span>.:format<span class="o">)</span>          books#index
            POST   /books<span class="o">(</span>.:format<span class="o">)</span>          books#create
   new_book GET    /books/new<span class="o">(</span>.:format<span class="o">)</span>      books#new
  edit_book GET    /books/:id/edit<span class="o">(</span>.:format<span class="o">)</span> books#edit
       book GET    /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#show
            PATCH  /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#update
            PUT    /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#update
            DELETE /books/:id<span class="o">(</span>.:format<span class="o">)</span>      books#destroy

  <span class="nv">$ </span>rails server
  <span class="o">=</span>&gt; Booting Puma
  ...</code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>In your text editor, open the <code class="highlighter-rouge">BooksController</code> and add the following method inside the <code class="highlighter-rouge">BooksController</code> class.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">index</span>
<span class="k">end</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes and try going to <a href="http://localhost:3000">http://localhost:3000/books</a> again.</p>

    <p><img src="http://25.media.tumblr.com/tumblr_lz8plpLwB11qg39ewo1_500.gif" alt="Aaugh!" title="We should serve this image locally" /></p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>  <span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">index</span>
    <span class="k">end</span>
  <span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing ActionController::UnknownFormat error: &quot;ActionController::UnknownFormat in BooksController#index - BooksController#index is missing a template for this request format and variant.&quot;" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>We’re making progress. Seriously! The <code class="highlighter-rouge">/books</code> path is sucessfully reaching the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">index</code> action, but we’re getting an error because we’re missing a template.</p>

    <p>A template is a view that get’s rendered at the end of a controller action. In this case, Rails is expecting your application to have an <code class="highlighter-rouge">index</code> template to go with the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">index</code> action.</p>

    <p>Let’s make that happen!</p>
  </li>
  <li>
    <p>Stop your <code class="highlighter-rouge">rails server</code> by running <code class="highlighter-rouge">Ctrl-c</code>.</p>
  </li>
  <li>
    <p>All templates live in <code class="highlighter-rouge">app/views</code>.</p>

    <p><code class="highlighter-rouge">app/views</code> will have directories for each of the controllers in your application. By default, a controller’s template directory will be the name of the controller…minus the controller.</p>

    <p>For example, the <code class="highlighter-rouge">BooksController</code>’s template directory will be <code class="highlighter-rouge">app/views/books</code>.</p>
  </li>
  <li>
    <p>Create the <code class="highlighter-rouge">BooksController</code> template directory by running <code class="highlighter-rouge">mkdir app/views/books</code>.</p>
  </li>
  <li>
    <p>Now, create the <code class="highlighter-rouge">BooksController</code>’s <code class="highlighter-rouge">index</code> template by running <code class="highlighter-rouge">touch app/views/books/index.html.erb</code>.`</p>
  </li>
  <li>
    <p>Restart your web server.</p>

    <p>(Remember? Start your web server by running <code class="highlighter-rouge">rails server</code>.)</p>
  </li>
  <li>
    <p>Now, try going to <a href="http://localhost:3000/books">http://localhost:3000/books</a>.</p>

    <p>Yay, no errors!</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="err">$</span> <span class="n">rails</span> <span class="n">server</span>
  <span class="o">=&gt;</span> <span class="no">Booting</span> <span class="no">Puma</span>
  <span class="p">.</span><span class="nf">.</span><span class="p">.</span>
  <span class="nf">^</span><span class="no">CExiting</span>

  <span class="err">$</span> <span class="n">mkdir</span> <span class="n">app</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">books</span>

  <span class="err">$</span> <span class="n">touch</span> <span class="n">app</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">books</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="nf">html</span><span class="p">.</span><span class="nf">erb</span>

  <span class="err">$</span> <span class="n">rails</span> <span class="n">server</span>
  <span class="p">.</span><span class="nf">.</span><span class="o">.</span>
  <span class="no">Started</span> <span class="no">GET</span> <span class="s2">"/books"</span> <span class="k">for</span> <span class="o">::</span><span class="mi">1</span> <span class="n">at</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">29</span> <span class="mi">22</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mo">07</span> <span class="o">-</span><span class="mo">0500</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">SchemaMigration</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span> <span class="s2">"schema_migrations"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"schema_migrations"</span>
  <span class="no">Processing</span> <span class="n">by</span> <span class="no">BooksController</span><span class="c1">#index as HTML</span>
    <span class="no">Rendering</span> <span class="n">books</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="nf">html</span><span class="p">.</span><span class="nf">erb</span> <span class="n">within</span> <span class="n">layouts</span><span class="o">/</span><span class="n">application</span>
    <span class="no">Rendered</span> <span class="n">books</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="nf">html</span><span class="p">.</span><span class="nf">erb</span> <span class="n">within</span> <span class="n">layouts</span><span class="o">/</span><span class="n">application</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="mi">7</span><span class="n">ms</span><span class="p">)</span>
  <span class="no">Completed</span> <span class="mi">200</span> <span class="no">OK</span> <span class="k">in</span> <span class="mi">645</span><span class="n">ms</span> <span class="p">(</span><span class="no">Views</span><span class="p">:</span> <span class="mi">631</span><span class="o">.</span><span class="mi">6</span><span class="n">ms</span> <span class="o">|</span> <span class="no">ActiveRecord</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">ms</span><span class="p">)</span></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Ok, let’s make this page a little more interesting.</p>
  </li>
  <li>
    <p>In your text editor, open <code class="highlighter-rouge">app/views/books/index.html.erb</code> and add the following line:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;
</span></code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes and go to <a href="http:://localhost:3000/books">http://localhost:3000/books</a> again.</p>

    <p>Yay! 🎉</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="aside">
<p>You’ve been going to the <code class="highlighter-rouge">/books</code> path a bunch and as a result you’ve been running the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">index</code> action a lot.</p>

<p>You can think of the <code class="highlighter-rouge">index</code> action as the index of a book because it’s used to list all of a controller’s resources. Since we’re in the <code class="highlighter-rouge">BooksController</code>, this <code class="highlighter-rouge">index</code> action is going to list all of the application’s books.</p>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Before you can show all of your application’s books, you have to make the books data available.</p>
  </li>
  <li>
    <p>In your text editor, open <code class="highlighter-rouge">app/controllers/books_controller.rb</code>. Inside the <code class="highlighter-rouge">index</code> method, add the following line:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="vi">@books</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">all</span>
</code></pre>
    </div>
    <p>That line might look a little familiar. We used <code class="highlighter-rouge">Book.all</code> in <a href="link">Chapter 2</a> to list all your application’s books in the <code class="highlighter-rouge">rails console</code>. We’re using the same method again so we can render your application’s books in the browser.</p>
  </li>
  <li>
    <p>Save your changes.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre>  <span class="k">class</span> <span class="nc">BooksController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">index</span>
      <span class="vi">@books</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">all</span>
    <span class="k">end</span>
  <span class="k">end</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>By making that change to the <code class="highlighter-rouge">index</code> action, you’ve made book data available to your <code class="highlighter-rouge">index</code> template.</p>

    <p>Let’s see what you can do with it.</p>
  </li>
  <li>
    <p>In your text editor, open <code class="highlighter-rouge">app/views/books/index.html.erb</code> and add the following line to the end of the file:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">%= @books[0].title %&gt;
</span></code></pre>
    </div>
  </li>
  <li>
    <p>Save your changes and try going to <a href="http://localhost:3000/books">http://localhost:3000/books</a> again.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;
  &lt;%= @books[0].title %&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing /books view with the application's first book title" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Your application’s data might be a little different than mine, but you’re probably seeing the title to <em>MY</em> favorite book. Yippie!</p>

    <p>(If your data is different, you’re seeing the title of some other book…sigh 😉)</p>
  </li>
  <li>
    <p>You had to do a couple of things to get that title to show up in your browser.</p>

    <p>First in the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">index</code> method, you defined an instance variable <code class="highlighter-rouge">@books</code> and assigned it all the books in your application.</p>

    <p>Then in the associated <code class="highlighter-rouge">index</code> template (<code class="highlighter-rouge">app/views/books/index.html.erb</code>), you used some funny looking syntax to get the first book and show it’s title.</p>

    <p>Let’s focus on that funny looking syntax for a few minutes.</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>In your text editor, open <code class="highlighter-rouge">app/views/books/index.html.erb</code>.</p>
  </li>
  <li>
    <p>Remember that line you added to the end of the file?</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">%= @books[0].title %&gt;
</span></code></pre>
    </div>

    <p>Change it so it looks like this:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">%= @books[1].title %&gt;
</span></code></pre>
    </div>
  </li>
  <li>
    <p>Can you guess what this will change? Reload <a href="http:://localhost:3000/books">http:://localhost:3000/books</a> to see what happens.</p>
  </li>
</ol>
</div>
</div>

<p><img src="screenshot.jpg" alt="Browser showing /books view with the application's second book title" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>You’re seeing a different book title, aren’t you?</p>

    <p>You used <code class="highlighter-rouge">@books[0]</code> to get the first book, and you changed it to <code class="highlighter-rouge">@books[1]</code> to get the next book.</p>
  </li>
  <li>
    <p>I bet you could get all the books to render on the <code class="highlighter-rouge">index</code> template…</p>

    <p>Spend some time and see if you can get all the book titles to render. If you’ve been following along with the tutorial, you should have seven books in your application.</p>

    <p>If you know some HTML, try listing the titles in an unordered list.</p>

    <p>Don’t know very much HTML? Don’t worry about it - you’ll get familiar with it reaaaal soon. Just focus on getting the titles to render.</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>What did you come up with?</p>

    <p>One way may have been to list out each book like this:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">%= @books[0].title %&gt;
&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;
&lt;%= @books[2].title %&gt;</span>
<span class="o">&lt;</span><span class="sx">%= @books[3].title %&gt;
&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;
&lt;%= @books[5].title %&gt;</span>
<span class="o">&lt;</span><span class="sx">%= @books[6].title %&gt;
</span></code></pre>
    </div>

    <p>That renders all the book titles, but they end up getting rendered on a single line.</p>
  </li>
  <li>
    <p>If you know some HTML, you may have thrown in a few <code class="highlighter-rouge">br</code>s to give the titles some space like this:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">%= @books[0].title %&gt;
&lt;br&gt;
&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;
&lt;br&gt;</span>
<span class="o">&lt;</span><span class="sx">%= @books[2].title %&gt;
&lt;br&gt;
&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;
&lt;br&gt;</span>
<span class="o">&lt;</span><span class="sx">%= @books[4].title %&gt;
&lt;br&gt;
&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;
&lt;br&gt;</span>
<span class="o">&lt;</span><span class="sx">%= @books[6].title %&gt;
</span></code></pre>
    </div>
  </li>
  <li>
    <p>Better yet, you may have even used an unordered list:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[0].title %&gt;&lt;/li&gt;
  &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[2].title %&gt;&lt;/li&gt;
  &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[4].title %&gt;&lt;/li&gt;
  &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[6].title %&gt;&lt;/li&gt;
&lt;/ul&gt;
</span></code></pre>
    </div>
  </li>
  <li>
    <p>If you used an unordered list, great! If not, no worries - update your solution to use an unordered list.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;

  &lt;ul&gt;
    &lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[1].title %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[3].title %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[5].title %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
  <span class="o">&lt;</span><span class="sr">/ul&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<p><img src="screenshot.jpg" alt="Browser showing /books view with ul of book titles" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Yay! Book titles!</p>

    <p>But doesn’t a lot of that code in your template look just a little…repetitive?</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[0].title %&gt;&lt;/li&gt;
&lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[2].title %&gt;&lt;/li&gt;
...
</span></code></pre>
    </div>
    <p>There has to be a better way!?</p>

    <p>There is :)</p>
  </li>
  <li>
    <p>Remember when you defined <code class="highlighter-rouge">@books</code> in the <code class="highlighter-rouge">BooksController</code> <code class="highlighter-rouge">index</code> method?</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="vi">@books</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">all</span>
</code></pre>
    </div>
    <p>You defined <code class="highlighter-rouge">@books</code> to be a collection of all the books in your application’s database. For our purposes, we can treat this collection like a <a href="http://ruby-doc.org/core-2.3.1/Array.html">Ruby Array</a>.</p>
  </li>
  <li>
    <p>You can get each item of a Ruby array by it’s index, and the first item starts at index 0.</p>

    <p>Does that sound familiar? It’s what you used to render the book titles.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code>  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[0].title %&gt;&lt;/li&gt;
  &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
  <span class="p">.</span><span class="nf">.</span><span class="o">.</span>
</code></pre>
    </div>

    <p>This works well, but it’s a very manual process. You have to individually access each book to render its title. It also depends on us knowing how many books there are in the database.</p>
  </li>
  <li>
    <p>In Ruby, we don’t have to access each book individually like this. We can use Array’s <a href="http://ruby-doc.org/core-2.3.1/Array.html#method-i-each"><code class="highlighter-rouge">each</code></a> method to help us out.</p>

    <p>Let’s see what that would look like.</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Go back to your terminal and quit the <code class="highlighter-rouge">rails server</code> by running <code class="highlighter-rouge">Ctrl-c</code>.</p>
  </li>
  <li>
    <p>Now, start the <code class="highlighter-rouge">rails console</code> by running…<code class="highlighter-rouge">rails console</code>.</p>
  </li>
  <li>
    <p>Run the following code:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">books</span> <span class="o">=</span> <span class="no">Books</span><span class="p">.</span><span class="nf">all</span>
</code></pre>
    </div>

    <p>You now have a <code class="highlighter-rouge">books</code> variable that’s been assigned all the books in your application’s database. <code class="highlighter-rouge">books</code> can be thought of as a Ruby Array.</p>

    <p>Sound familiar :)</p>
  </li>
  <li>
    <p>Now, try running the following:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">books</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">book</span><span class="p">.</span><span class="nf">title</span> <span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>What happened?</p>

    <p>You used the <code class="highlighter-rouge">each</code> method to iterate over each book and print its title.</p>
  </li>
  <li>
    <p>The curly braces ({}) after <code class="highlighter-rouge">each</code> are the start and end of a block. We’ve seen the other block notation before - it starts with a <code class="highlighter-rouge">do</code> and ends with an <code class="highlighter-rouge">end</code>.</p>

    <p>Try running the following:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">books</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">book</span><span class="p">.</span><span class="nf">title</span>
<span class="k">end</span>
</code></pre>
    </div>

    <p>The syntax might be different, but it’s the same result - each of the book titles are printed.</p>
  </li>
  <li>
    <p>At the beginning of the block, you have a couple of pipes surronding <code class="highlighter-rouge">book</code></p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">books</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span> <span class="p">.</span><span class="nf">.</span><span class="o">.</span> <span class="p">}</span>
</code></pre>
    </div>

    <p>This is called a block parameter. In this case, it lets you access each book so you can print its title.</p>
  </li>
  <li>
    <p>Before, we would’ve manually gone through each book to print its title.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">puts</span> <span class="n">books</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">title</span>
<span class="nb">puts</span> <span class="n">books</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">title</span>
<span class="p">.</span><span class="nf">.</span><span class="o">.</span>
</code></pre>
    </div>

    <p>Now, <code class="highlighter-rouge">each</code> lets us do it in a lot less code.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">books</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">book</span><span class="p">.</span><span class="nf">title</span> <span class="p">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Try playing with the <code class="highlighter-rouge">each</code> method to see what else you can print out. You should be able print things like the book ids, authors, and quantities.</p>
  </li>
  <li>
    <p>When you’re done exploring, run <code class="highlighter-rouge">exit</code> to exit the <code class="highlighter-rouge">rails console</code> and restart the <code class="highlighter-rouge">rails server</code>.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby">  <span class="o">&gt;&gt;</span> <span class="n">books</span> <span class="o">=</span> <span class="no">Book</span><span class="p">.</span><span class="nf">all</span>
    <span class="no">Book</span> <span class="no">Load</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="mi">4</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span> <span class="s2">"books"</span><span class="p">.</span><span class="nf">*</span> <span class="no">FROM</span> <span class="s2">"books"</span>
  <span class="o">=&gt;</span> <span class="c1">#&lt;ActiveRecord::Relation [#&lt;Book id: 1, title: "why's (poignant) Guide to Ruby", author: "why the lucky stiff", price_cents: 100, created_at: "2016-11-24 03:30:53", updated_at: "2016-11-24 03:30:53", quantity: 500&gt;, #&lt;Book id: 2, title: "Oh, the Places You'll Go!", author: "Dr. Seuss", price_cents: 500, created_at: "2016-11-24 03:33:22", updated_at: "2016-11-24 03:33:22", quantity: 200&gt;, #&lt;Book id: 4, title: "1984", author: "George Orwell", price_cents: 0, created_at: "2016-11-30 01:35:44", updated_at: "2016-11-30 01:35:44", quantity: 200&gt;, #&lt;Book id: 5, title: "The Sound and The Fury", author: "William Faulkner", price_cents: 500, created_at: "2016-11-30 01:36:47", updated_at: "2016-11-30 01:36:47", quantity: 150&gt;, #&lt;Book id: 6, title: "Life of Pi", author: "Yann Martel", price_cents: 750, created_at: "2016-11-30 01:37:40", updated_at: "2016-11-30 01:37:40", quantity: 50&gt;, #&lt;Book id: 7, title: "The Kite Runner", author: "Khaled Hosseini", price_cents: 600, created_at: "2016-11-30 01:38:28", updated_at: "2016-11-30 01:38:28", quantity: 23&gt;, #&lt;Book id: 8, title: "Ender's Game", author: "Orson Scott Card", price_cents: 42, created_at: "2016-11-30 01:40:20", updated_at: "2016-11-30 01:40:20", quantity: 1000&gt;]&gt;</span>

  <span class="o">&gt;&gt;</span> <span class="n">books</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">book</span><span class="p">.</span><span class="nf">title</span> <span class="p">}</span>
  <span class="n">why</span><span class="s1">'s (poignant) Guide to Ruby
  Oh, the Places You'</span><span class="n">ll</span> <span class="no">Go</span><span class="o">!</span>
  <span class="mi">1984</span>
  <span class="no">The</span> <span class="no">Sound</span> <span class="n">and</span> <span class="no">The</span> <span class="no">Fury</span>
  <span class="no">Life</span> <span class="n">of</span> <span class="no">Pi</span>
  <span class="no">The</span> <span class="no">Kite</span> <span class="no">Runner</span>
  <span class="no">Ender</span><span class="s1">'s Game
  =&gt; [#&lt;Book id: 1, title: "why'</span><span class="n">s</span> <span class="p">(</span><span class="n">poignant</span><span class="p">)</span> <span class="no">Guide</span> <span class="n">to</span> <span class="no">Ruby</span><span class="s2">", author: "</span><span class="n">why</span> <span class="n">the</span> <span class="n">lucky</span> <span class="n">stiff</span><span class="s2">", price_cents: 100, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">24</span> <span class="mo">03</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">53</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">24</span> <span class="mo">03</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">53</span><span class="s2">", quantity: 500&gt;, #&lt;Book id: 2, title: "</span><span class="no">Oh</span><span class="p">,</span> <span class="n">the</span> <span class="no">Places</span> <span class="no">You</span><span class="s1">'ll Go!", author: "Dr. Seuss", price_cents: 500, created_at: "2016-11-24 03:33:22", updated_at: "2016-11-24 03:33:22", quantity: 200&gt;, #&lt;Book id: 4, title: "1984", author: "George Orwell", price_cents: 0, created_at: "2016-11-30 01:35:44", updated_at: "2016-11-30 01:35:44", quantity: 200&gt;, #&lt;Book id: 5, title: "The Sound and The Fury", author: "William Faulkner", price_cents: 500, created_at: "2016-11-30 01:36:47", updated_at: "2016-11-30 01:36:47", quantity: 150&gt;, #&lt;Book id: 6, title: "Life of Pi", author: "Yann Martel", price_cents: 750, created_at: "2016-11-30 01:37:40", updated_at: "2016-11-30 01:37:40", quantity: 50&gt;, #&lt;Book id: 7, title: "The Kite Runner", author: "Khaled Hosseini", price_cents: 600, created_at: "2016-11-30 01:38:28", updated_at: "2016-11-30 01:38:28", quantity: 23&gt;, #&lt;Book id: 8, title: "Ender'</span><span class="n">s</span> <span class="no">Game</span><span class="s2">", author: "</span><span class="no">Orson</span> <span class="no">Scott</span> <span class="no">Card</span><span class="s2">", price_cents: 42, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">20</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">20</span><span class="s2">", quantity: 1000&gt;]

  &gt;&gt; books.each do |book|
  ?&gt;     puts book.title
  &gt;&gt;   end
  why's (poignant) Guide to Ruby
  Oh, the Places You'll Go!
  1984
  The Sound and The Fury
  Life of Pi
  The Kite Runner
  Ender's Game
  =&gt; [#&lt;Book id: 1, title: "</span><span class="n">why</span><span class="s1">'s (poignant) Guide to Ruby", author: "why the lucky stiff", price_cents: 100, created_at: "2016-11-24 03:30:53", updated_at: "2016-11-24 03:30:53", quantity: 500&gt;, #&lt;Book id: 2, title: "Oh, the Places You'</span><span class="n">ll</span> <span class="no">Go</span><span class="o">!</span><span class="s2">", author: "</span><span class="no">Dr</span><span class="o">.</span> <span class="no">Seuss</span><span class="s2">", price_cents: 500, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">24</span> <span class="mo">03</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">22</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">24</span> <span class="mo">03</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">22</span><span class="s2">", quantity: 200&gt;, #&lt;Book id: 4, title: "</span><span class="mi">1984</span><span class="s2">", author: "</span><span class="no">George</span> <span class="no">Orwell</span><span class="s2">", price_cents: 0, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">44</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">35</span><span class="p">:</span><span class="mi">44</span><span class="s2">", quantity: 200&gt;, #&lt;Book id: 5, title: "</span><span class="no">The</span> <span class="no">Sound</span> <span class="n">and</span> <span class="no">The</span> <span class="no">Fury</span><span class="s2">", author: "</span><span class="no">William</span> <span class="no">Faulkner</span><span class="s2">", price_cents: 500, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">47</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">47</span><span class="s2">", quantity: 150&gt;, #&lt;Book id: 6, title: "</span><span class="no">Life</span> <span class="n">of</span> <span class="no">Pi</span><span class="s2">", author: "</span><span class="no">Yann</span> <span class="no">Martel</span><span class="s2">", price_cents: 750, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">40</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">40</span><span class="s2">", quantity: 50&gt;, #&lt;Book id: 7, title: "</span><span class="no">The</span> <span class="no">Kite</span> <span class="no">Runner</span><span class="s2">", author: "</span><span class="no">Khaled</span> <span class="no">Hosseini</span><span class="s2">", price_cents: 600, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mi">28</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mi">28</span><span class="s2">", quantity: 23&gt;, #&lt;Book id: 8, title: "</span><span class="no">Ender</span><span class="err">'</span><span class="n">s</span> <span class="no">Game</span><span class="s2">", author: "</span><span class="no">Orson</span> <span class="no">Scott</span> <span class="no">Card</span><span class="s2">", price_cents: 42, created_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">20</span><span class="s2">", updated_at: "</span><span class="mi">2016</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span> <span class="mo">01</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">20</span><span class="s2">", quantity: 1000&gt;]</span></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Let’s put this knowledge to work.</p>
  </li>
  <li>
    <p>In you text editor, open <code class="highlighter-rouge">app/views/books/index.html.erb</code>.</p>
  </li>
  <li>
    <p>At the end of the file, add a new, empty unordered list. It should look like this:</p>

    <div class="language-html highlighter-rouge"><pre class="highlight"><code>  <span class="nt">&lt;ul&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Inside the new unordered list, we’ll want to iterate over all the books assigned to <code class="highlighter-rouge">@books</code> and render a list item for each book title.</p>

    <p>We can iterate over <code class="highlighter-rouge">@books</code> by using the <code class="highlighter-rouge">each</code> method.</p>
  </li>
  <li>
    <p>We’ve seen how to use the <code class="highlighter-rouge">each</code> method on the <code class="highlighter-rouge">rails console</code>, but how will you use it in your template?</p>

    <p>To run Ruby code in your template, you have to put it inside some funny looking brackets:</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="p">.</span><span class="nf">.</span><span class="o">.</span> <span class="cp">%&gt;</span>
</code></pre>
    </div>

    <p>Everything inside <code class="highlighter-rouge">&lt;% %&gt;</code> will get run in your template.</p>

    <p>We’ve seen something similar before. Remember how you got the book titles to render?</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span>
</code></pre>
    </div>

    <p>The syntax is slightly different. <code class="highlighter-rouge">&lt;%= %&gt;</code> runs Ruby code <em>and</em> renders the result in your template.</p>

    <p><code class="highlighter-rouge">&lt;% %&gt;</code> on the other hand <em>only</em> runs Ruby code. It <em>does not</em> render the
result of that code.</p>
  </li>
  <li>
    <p>With that in mind, add the following code inside your new unordered list:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">% @books.each </span><span class="k">do</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span> <span class="sx">%&gt;
&lt;% end %&gt;</span>
</code></pre>
    </div>

    <p>Go to <a href="http://localhost:3000/books">http://localhost:3000/books</a> again. Did anything change?</p>

    <p>Nothing changed! You’re running <code class="highlighter-rouge">@books.each</code> in your template, but since it’s inside <code class="highlighter-rouge">&lt;% %&gt;</code> the result of that block isn’t rendered.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;

  &lt;ul&gt;
    &lt;li&gt;&lt;%= @books[0].title %&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[1].title %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[3].title %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
    <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= @books[5].title %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="nf">title</span> <span class="sx">%&gt;&lt;/li&gt;</span>
  <span class="o">&lt;</span><span class="sr">/ul&gt;

  &lt;ul&gt;
    &lt;% @books.each do |book| %&gt;
    &lt;% end %&gt;
  &lt;/u</span><span class="n">l</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now that you have your block setup, you’re ready to render some book titles.</p>
  </li>
  <li>
    <p>Spend a few minutes and see if you can get each book title to render as a list item inside the block.</p>

    <p>Inside the block, each book is availble to you as <code class="highlighter-rouge">book</code>.</p>

    <p>When you’re done, you should see two identical unordered lists on <a href="http://localhost:3000/books">http://localhost:3000/books</a>.</p>
  </li>
</ol>
</div>
</div>

<p><img src="screenshot.jpg" alt="Browser showing /books view with two unordered lists" /></p>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Did you get it?! Your new unordered list should look something like this:</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@books</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">book</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
    </div>

    <p>Update your solution to match this solution.</p>
  </li>
  <li>
    <p>Compare your two unordered lists. They both end in the same result, but one required a little more effort.</p>

    <div class="language-erb highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;ul&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@books</span><span class="p">[</span><span class="mi">6</span><span class="p">].</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@books</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">book</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">book</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
    </div>

    <p>We can take advantage of the ability to run Ruby code inside Rails templates to do things quickly.</p>
  </li>
  <li>
    <p>You don’t need to show both unordered lists, so go ahead and remove the first one.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;

  &lt;ul&gt;
    &lt;% @books.each do |book| %&gt;
      &lt;li&gt;&lt;%= book.title %&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
  <span class="o">&lt;</span><span class="sr">/ul&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>Now that you have book titles rendering, let’s try adding some information.</p>
  </li>
  <li>
    <p>Update the books unordered lists so it includes the book author next to each author like this:</p>

    <p>why’s (poignant) Guide to Ruby by why the lucky stiff</p>
  </li>
</ol>
</div>
</div>

<div class="steps">
<div class="list">
<ol>
  <li>
    <p>What did you come up with? Compare your solution with people around you.</p>

    <p>Inside the <code class="highlighter-rouge">@books.each</code> block, you should’ve edited the list item so it renders each book’s author next to its title.</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="sx">%= book.title %&gt; by &lt;%=</span> <span class="n">book</span><span class="p">.</span><span class="nf">author</span> <span class="sx">%&gt;&lt;/li&gt;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Update your solution to match this solution.</p>
  </li>
  <li>
    <p>When you’re done, stop your application’s web server by running <code class="highlighter-rouge">Ctrl-C</code>.</p>
  </li>
</ol>
</div>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre>  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span> <span class="n">to</span> <span class="no">My</span> <span class="no">Super</span> <span class="no">Rad</span> <span class="no">Bookstore</span><span class="o">!&lt;</span><span class="sr">/h1&gt;

  &lt;ul&gt;
    &lt;% @books.each do |book| %&gt;
      &lt;li&gt;&lt;%= book.title %&gt; by &lt;%= book.author %&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sx">% end </span><span class="o">%&gt;</span>
  <span class="o">&lt;</span><span class="sr">/ul&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

</div>

      <div class="tutorial-button-group">
  
    
      <a href="/rails_tutorial/tutorial/chapter_02/" target="_self">
        <div class="back-button">
          Chapter 2
        </div>
      </a>
    
    
      <a href="/rails_tutorial/tutorial/chapter_04/" target="_self">
        <div class="next-button">
          Chapter 4
        </div>
      </a>
    
  
</div>

    </div>
  </div>
<footer>
  <div class="container">
    <p class="center-text">Here's the footer!!</a></p>
  </div>
</footer>
</body>
</html>

